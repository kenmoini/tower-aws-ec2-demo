---
- name: Lab deployment successfully completed
  hosts: localhost
  gather_facts: false
  vars:
  - rc_tower_token: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30626136333539376432356264396436396337333033633661616234393032356165663436316133
          6630323231613839623533643436383032306639666337350a373666343530363966393833323333
          63383237653033336633326265363166313666663138633935326637613266313134623237623130
          3234643464376163660a306365393937336265353265343735623630653164653937333166626436
          62353637376163656536316334303536343738333339363065326534613931616632373165363261
          3462616434633534616132616563646163613331646532363736
  - rc_tower_user: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32393765633435616134613265353733323732666135356336383861663933613864396366616462
          3033316635363437363363643366636637663535656436610a363439353364353164623133313562
          61343531643736323130336239316665353430386231353037303961376135386265333731386233
          3936343866333834300a376537393462613961326236373061333336383339306661616538363532
          66313834336330613362346630643039613766386436353534366139356261623032
    
  tasks:
  
  - name: Send Message to ChatOps
    rocketchat: 
      token: '{{ rc_tower_token }}'
      domain: https://rchat-chatops-rocketchat.apps.openshift.fiercesw.network 
      msg: "You can now access your lab server at: {{ labserver_endpoint }}"
      color: good
      channel: #devsecops-workshop
      username: '{{ rc_tower_user }}'
      icon_url: https://miro.medium.com/max/900/1*Kv7-9rbjnioqGIyycCtkJQ.jpeg
    delegate_to: localhost
    ignore_errors: true
      
  - name: Lab creation successful!
    debug:
      msg: "You can now access your lab server at: {{ labserver_endpoint }}"
